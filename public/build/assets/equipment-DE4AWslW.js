import{r as c,c as m,S as s,f as h,b as y,h as r,l as u}from"./helper-BjVJ0fku.js";document.addEventListener("DOMContentLoaded",function(){const f=$("#table-equipment-url").val(),d=$("#asset-url").val();$("#table-equipment").DataTable({order:[[0,"desc"]],ordering:!0,serverSide:!0,processing:!0,autoWidth:!1,responsive:!0,ajax:{url:f},language:{search:"Cari:",paginate:{first:"Pertama",last:"Terakhir",next:"Berikutnya",previous:"Sebelumnya"},info:"Menampilkan halaman _PAGE_ dari _PAGES_",infoEmpty:"Tidak ada data yang tersedia",infoFiltered:"(Terfilter dari _MAX_ jumlah data)",lengthMenu:"Tampilkan _MENU_ data per halaman",emptyTable:`<div class="text-center"><img class="mb-3" width="200" src="${d+"assets/dist/img/undraw_no_data_re_kwbl.svg"}"><p>Data Masih Kosong</p></div>`,zeroRecords:`<div class="text-center"><img class="mb-3" width="200" src="${d+"assets/dist/img/undraw_not_found_re_bh2e.svg"}"><p>Data Tidak Ditemukan</p></div>`},columns:[{data:"DT_RowIndex",name:"DT_RowIndex",width:"40px",orderable:!1,searchable:!1},{data:"type",name:"type",className:"text-nowrap",orderable:!1,searchable:!0},{data:"name",name:"name",className:"text-nowrap",orderable:!1,searchable:!0},{data:"brand",name:"brand",className:"text-nowrap",orderable:!1,searchable:!0},{data:"specification",name:"specification",className:"text-nowrap",orderable:!1,searchable:!0},{data:"action",name:"action",className:"text-nowrap",orderable:!1,searchable:!1}],columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:1}]}),$("#btn-equipment-add").click(function(){console.log($("#id").val()),$(".container form").each(function(){this.reset()}),$("#id_equipment").val(""),$("#modal-equipment").modal("show"),$(".modal-title").empty().append("Tambah Peralatan"),c()}),$("#btn-save-equipment").click(function(i){i.preventDefault();let a=new FormData,e="#btn-save-equipment",l="#table-equipment",o="#modal-equipment",n=$("#equipment_id").val(),v=$("#name").val(),b=$("#type").val(),g=$("#brand").val(),w=$("#specification").val(),k=$("#id").val();if(a.append("id",n),a.append("name",v),a.append("type",b),a.append("brand",g),a.append("specification",w),a.append("conversion_id",k),n!=="")var p=$("#update-equipment-url").val();else var p=$("#create-equipment-url").val();$(e).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(p,{method:"POST",headers:{"X-CSRF-TOKEN":m()},body:a}).then(t=>t.json()).then(t=>{t.code==200&&($(o).modal("hide"),s.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${t.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),h(l),$(".container form").each(function(){this.reset()})),(t.errors||t.invalid)&&new y(t.errors||t.invalid)}).catch(t=>{console.log("Error:",t)}).finally(()=>{r(1e3),$(e).empty().append("Simpan").prop("disabled",!1)})}),$("#table-equipment").on("click",".edit",function(){let i=$(this).data("id"),a=$("#edit-equipment-url").val();a=a.replace(":id",i),u(),fetch(a,{method:"GET"}).then(e=>e.json()).then(e=>{e.code==200&&($(".modal-title").empty().append("Edit Peralatan"),$("#equipment_id").val(e.data.id),$("#name").val(e.data.name),$("#type").val(e.data.type),$("#brand").val(e.data.brand),$("#specification").val(e.data.specification),$("#modal-equipment").modal("show"),c())}).catch(e=>{console.log("Error:",e)}).finally(()=>{r(1e3)})}),$("#table-equipment").on("click",".delete",function(){let i=$(this).data("id"),a=$("#delete-equipment-url").val(),e="#table-equipment",l=new FormData;l.append("id",i),u(),s.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-danger"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 9v4"></path><path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z"></path><path d="M12 16h.01"></path></svg>
                    <h3>Apakah anda yakin</h3>
                    <div class="text-secondary" style="font-size: 14px !important;">Apakah Anda benar-benar ingin menghapus data ini? Apa yang telah Anda lakukan tidak dapat dibatalkan.</div>`,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"btn btn-danger w-100",cancelButton:"btn w-100"},showCancelButton:!0}).then(o=>{o.isConfirmed&&fetch(a,{method:"POST",headers:{"X-CSRF-TOKEN":m()},body:l}).then(n=>n.json()).then(n=>{n.code==200&&(h(e),s.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                            <h3>Berhasil</h3>
                            <div class="text-secondary">${n.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}))}).catch(n=>{console.log("Error:",n)}).finally(()=>{r()}),r(1e3)})})});
