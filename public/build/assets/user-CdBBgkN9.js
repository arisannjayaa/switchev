import{g as v,r as m,l as d,c,d as u,S as h,h as i,i as g}from"./helper-DPa9qwI8.js";document.addEventListener("DOMContentLoaded",function(){const b=$("#table-url").val(),p=$("#asset-url").val();$("#table").DataTable({order:[[0,"desc"]],ordering:!0,serverSide:!0,processing:!0,autoWidth:!1,responsive:!0,ajax:{url:b},language:{search:"Cari:",paginate:{first:"Pertama",last:"Terakhir",next:"Berikutnya",previous:"Sebelumnya"},info:"Menampilkan halaman _PAGE_ dari _PAGES_",infoEmpty:"Tidak ada data yang tersedia",infoFiltered:"(Terfilter dari _MAX_ jumlah data)",lengthMenu:"Tampilkan _MENU_ data per halaman",emptyTable:`<div class="text-center"><img class="mb-3" width="200" src="${p+"assets/dist/img/undraw_no_data_re_kwbl.svg"}"><p>Data Masih Kosong</p></div>`,zeroRecords:`<div class="text-center"><img class="mb-3" width="200" src="${p+"assets/dist/img/undraw_not_found_re_bh2e.svg"}"><p>Data Tidak Ditemukan</p></div>`},columns:[{data:"DT_RowIndex",name:"DT_RowIndex",width:"40px",orderable:!1,searchable:!1},{data:"name",name:"name",className:"text-nowrap",orderable:!1,searchable:!0},{data:"email",name:"email",className:"text-nowrap",orderable:!1,searchable:!0},{data:"status",name:"status",className:"text-nowrap",orderable:!1,searchable:!0,render:function(n){return'<span class="badge '+v(n).color+'">'+v(n).status}},{data:"action",name:"action",className:"text-nowrap",orderable:!1,searchable:!1}],columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:1}]}),$("#btn-add").click(function(){$("#form-user")[0].reset(),$("#id").val(""),$("#modal-user").modal("show"),$(".modal-title").empty().append("Tambah User"),m()}),$("#btn-change-password").click(function(){$("#form-change-password")[0].reset(),$("#id").val(""),$("#modal-change-password").modal("show"),$(".modal-title").empty().append("Ubah Kata Sandi Baru"),m()}),$("#form-change-password").submit(function(n){n.preventDefault(),d();let r=new FormData(this),e="#btn-account-setting-submit",l="#form-change-password",t="#modal-change-password",o=$("#change-password-url").val();$(e).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`),fetch(o,{method:"POST",headers:{"X-CSRF-TOKEN":c()},body:r}).then(a=>a.json()).then(a=>{if(a.errors||a.invalid)return new u(a.errors||a.invalid);a.code==200&&($(t).modal("hide"),h.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${a.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),$(l)[0].reset(),setTimeout(()=>{window.location.href=a.data.redirect},1e3))}).catch(a=>{console.log("Error:",a)}).finally(()=>{i(1e3),$(e).empty().append("Ubah Kata Sandi")})}),$("#form-account-setting").submit(function(n){n.preventDefault(),d();let r=new FormData(this),e="#btn-account-setting-submit",l=$("#update-url").val();$(e).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`),fetch(l,{method:"POST",headers:{"X-CSRF-TOKEN":c()},body:r}).then(t=>t.json()).then(t=>{if(t.errors||t.invalid)return new u(t.errors||t.invalid);t.code==200&&(h.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${t.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),setTimeout(()=>{window.location.href=t.data.redirect},1e3))}).catch(t=>{console.log("Error:",t)}).finally(()=>{i(1e3),$(e).empty().append("Simpan")})}),$("#form-user").submit(function(n){n.preventDefault(),d();let r=$("#id").val(),e=new FormData(this),l="#btn-submit",t="#table",o="#form-user",a="#modal-user";if(r!=="")var f=$("#update-url").val();else var f=$("#create-url").val();$(l).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`),fetch(f,{method:"POST",headers:{"X-CSRF-TOKEN":c()},body:e}).then(s=>s.json()).then(s=>{s.code==200&&($(a).modal("hide"),h.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${s.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),g(t),$(o)[0].reset()),(s.errors||s.invalid)&&new u(s.errors||s.invalid)}).catch(s=>{console.log("Error:",s)}).finally(()=>{i(1e3),$(l).empty().append("Simpan")})}),$("#table").on("click",".edit",function(){let n=$(this).data("id"),r=$("#edit-url").val();r=r.replace(":id",n),d(),fetch(r,{method:"GET"}).then(e=>e.json()).then(e=>{console.log(e),e.code==200&&($(".modal-title").empty().append("Edit User"),$("#id").val(e.data.id),$("#name").val(e.data.name),$("#email").val(e.data.email),$("#telephone").val(e.data.telephone),$("#status").val(e.data.status),$("#no_induk_berusaha").attr("href",e.data.secure_no_induk),$("#fisik_bengkel").attr("href",e.data.secure_foto_fisik),$("#modal-user").modal("show"),m())}).catch(e=>{console.log("Error:",e)}).finally(()=>{i(1e3)})}),$("#table").on("click",".delete",function(){let n=$(this).data("id"),r=$("#delete-url").val(),e="#table",l=new FormData;l.append("id",n),d(),h.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-danger"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 9v4"></path><path d="M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z"></path><path d="M12 16h.01"></path></svg>
                    <h3>Apakah anda yakin</h3>
                    <div class="text-secondary" style="font-size: 14px !important;">Apakah Anda benar-benar ingin menghapus data ini? Apa yang telah Anda lakukan tidak dapat dibatalkan.</div>`,confirmButtonText:"Hapus",cancelButtonText:"Batal",customClass:{confirmButton:"btn btn-danger w-100",cancelButton:"btn w-100"},showCancelButton:!0}).then(t=>{t.isConfirmed&&fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":c()},body:l}).then(o=>o.json()).then(o=>{o.code==200&&(g(e),h.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                            <h3>Berhasil</h3>
                            <div class="text-secondary">${o.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}))}).catch(o=>{console.log("Error:",o)}).finally(()=>{i()}),i(1e3)})})});
