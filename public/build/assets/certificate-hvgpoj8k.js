import{c as d,b as s,S as p}from"./helper-BjVJ0fku.js";document.addEventListener("DOMContentLoaded",function(){const c=$("#is-certificate-ready").val();$("#btn-approve").prop("disabled",!0),c==1&&$("#btn-approve").prop("disabled",!1),$("#btn-download-sk").click(function(){let i=$("#download-sk-url").val(),t=new FormData;t.append("id",$("#id").val());let r="#btn-download-sk";$(r).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(i,{method:"POST",headers:{"X-CSRF-TOKEN":d()},body:t}).then(e=>e.json()).then(e=>{e.code==200&&fetch(e.data.download).then(l=>l.blob()).then(l=>{const a=window.URL.createObjectURL(l),n=document.createElement("a");n.href=a,n.download=e.data.file_name,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a)}),(e.errors||e.invalid)&&new s(e.errors||e.invalid)}).catch(e=>{console.log("Error:",e)}).finally(()=>{$(r).empty().append(`
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon mx-0 icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
                `).prop("disabled",!1)})}),$("#btn-download-certificate").click(function(){let i=$("#download-certificate-url").val(),t=new FormData;t.append("id",$("#id").val());let r="#btn-download-certificate";$(r).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(i,{method:"POST",headers:{"X-CSRF-TOKEN":d()},body:t}).then(e=>e.json()).then(e=>{e.code==200&&fetch(e.data.download).then(l=>l.blob()).then(l=>{const a=window.URL.createObjectURL(l),n=document.createElement("a");n.href=a,n.download=e.data.file_name,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(a)}),(e.errors||e.invalid)&&new s(e.errors||e.invalid)}).catch(e=>{console.log("Error:",e)}).finally(()=>{$(r).empty().append(`
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon mx-0 icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
                `).prop("disabled",!1)})}),$("#btn-upload-archive").click(function(){let i=$("#upload-archive-url").val(),t=new FormData,r=document.getElementById("sk_attachment").files[0],e=document.getElementById("sft_attachment").files[0],l=$("#id").val(),a=$("#user-id").val(),n="#btn-upload-archive";t.append("sk_attachment",r),t.append("sft_attachment",e),t.append("conversion_id",l),t.append("user_id",a),$(n).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(i,{method:"POST",headers:{"X-CSRF-TOKEN":d()},body:t}).then(o=>o.json()).then(o=>{o.code==200&&(p.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${o.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),$("#btn-approve").empty().append("Selesai").prop("disabled",!1)),(o.errors||o.invalid)&&new s(o.errors||o.invalid)}).catch(o=>{console.log("Error:",o)}).finally(()=>{$(n).empty().append('<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="mx-0 icon icon-tabler icons-tabler-outline icon-tabler-upload"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 9l5 -5l5 5" /><path d="M12 4l0 12" /></svg>').prop("disabled",!1)})})});
