import{c as s,d,S as c}from"./helper-DPa9qwI8.js";document.addEventListener("DOMContentLoaded",function(){const u=$("#table-url").val(),p=$("#asset-url").val();$("#table").DataTable({order:[[0,"desc"]],ordering:!0,serverSide:!0,processing:!0,autoWidth:!1,responsive:!0,ajax:{url:u},language:{search:"Cari:",paginate:{first:"Pertama",last:"Terakhir",next:"Berikutnya",previous:"Sebelumnya"},info:"Menampilkan halaman _PAGE_ dari _PAGES_",infoEmpty:"Tidak ada data yang tersedia",infoFiltered:"(Terfilter dari _MAX_ jumlah data)",lengthMenu:"Tampilkan _MENU_ data per halaman",emptyTable:`<div class="text-center"><img class="mb-3" width="200" src="${p+"assets/dist/img/undraw_no_data_re_kwbl.svg"}"><p>Data Masih Kosong</p></div>`,zeroRecords:`<div class="text-center"><img class="mb-3" width="200" src="${p+"assets/dist/img/undraw_not_found_re_bh2e.svg"}"><p>Data Tidak Ditemukan</p></div>`},columns:[{data:"DT_RowIndex",name:"DT_RowIndex",width:"40px",orderable:!1,searchable:!1},{data:"sk_file_name",name:"sk_file_name",className:"text-nowrap",orderable:!1,searchable:!0},{data:"sft_file_name",name:"sft_file_name",className:"text-nowrap",orderable:!1,searchable:!0},{data:"status",name:"status",className:"text-nowrap",orderable:!1,searchable:!0},{data:"action",name:"action",className:"text-nowrap",orderable:!1,searchable:!1}],columnDefs:[{responsivePriority:1,targets:0},{responsivePriority:2,targets:1}]});const f=$("#is-certificate-ready").val();$("#btn-approve").prop("disabled",!0),f==1&&$("#btn-approve").prop("disabled",!1),$("#btn-download-sk").click(function(){let r=$("#download-sk-url").val(),t=new FormData;t.append("id",$("#id").val()),t.append("accreditation_type",$("#accreditation_type").val());let n="#btn-download-sk";$(n).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":s()},body:t}).then(e=>e.json()).then(e=>{e.code==200&&fetch(e.data.download).then(l=>l.blob()).then(l=>{const i=window.URL.createObjectURL(l),a=document.createElement("a");a.href=i,a.download=e.data.file_name,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i)}),(e.errors||e.invalid)&&new d(e.errors||e.invalid)}).catch(e=>{console.log("Error:",e)}).finally(()=>{$(n).empty().append(`
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon mx-0 icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
                `).prop("disabled",!1)})}),$("#btn-download-certificate").click(function(){let r=$("#download-certificate-url").val(),t=new FormData;t.append("id",$("#id").val()),t.append("accreditation_type",$("#accreditation_type").val());let n="#btn-download-certificate";$(n).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":s()},body:t}).then(e=>e.json()).then(e=>{e.code==200&&fetch(e.data.download).then(l=>l.blob()).then(l=>{const i=window.URL.createObjectURL(l),a=document.createElement("a");a.href=i,a.download=e.data.file_name,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(i)}),(e.errors||e.invalid)&&new d(e.errors||e.invalid)}).catch(e=>{console.log("Error:",e)}).finally(()=>{$(n).empty().append(`
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon mx-0 icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>
                `).prop("disabled",!1)})}),$("#btn-upload-archive").click(function(){let r=$("#upload-archive-url").val(),t=new FormData,n=document.getElementById("sk_attachment").files[0],e=document.getElementById("sft_attachment").files[0],l=$("#id").val(),i=$("#certificate_id").val(),a=$("#user-id").val(),h="#btn-upload-archive";t.append("sk_attachment",n),t.append("sft_attachment",e),t.append("conversion_id",l),t.append("user_id",a),t.append("user_id",a),t.append("id",i),$(h).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":s()},body:t}).then(o=>o.json()).then(o=>{o.code==200&&(c.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${o.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),$("#btn-approve").empty().append("Selesai").prop("disabled",!1),window.location.href=o.data.redirect),(o.errors||o.invalid)&&new d(o.errors||o.invalid)}).catch(o=>{console.log("Error:",o)}).finally(()=>{$(h).empty().append('<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="mx-0 icon icon-tabler icons-tabler-outline icon-tabler-upload"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 9l5 -5l5 5" /><path d="M12 4l0 12" /></svg>').prop("disabled",!1)})}),$("#btn-verification").click(function(){let r=$("#verify-url").val(),t=new FormData;t.append("id",$("#id").val());let n="#btn-verification";$(n).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":s()},body:t}).then(e=>e.json()).then(e=>{e.code==200&&(c.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${e.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),setTimeout(function(){window.location.href=e.data.redirect},1e3)),(e.errors||e.invalid)&&new d(e.errors||e.invalid)}).catch(e=>{console.log("Error:",e)}).finally(()=>{$(n).empty().append("Verifikasi").prop("disabled",!1)})}),$("#btn-send-draft").click(function(){let r=$("#send-draft-url").val(),t=new FormData;t.append("id",$("#id").val()),t.append("accreditation_type",$("#accreditation_type").val());let n="#btn-send-draft";$(n).empty().append(`<div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                                </div>`).prop("disabled",!0),fetch(r,{method:"POST",headers:{"X-CSRF-TOKEN":s()},body:t}).then(e=>e.json()).then(e=>{e.code==200&&(c.fire({html:`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mb-2 text-green"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path><path d="M9 12l2 2l4 -4"></path></svg>
                    <h3>Berhasil</h3>
                    <div class="text-secondary">${e.message}</div>`,confirmButtonText:"Ok",confirmButtonColor:"#2fb344",customClass:{confirmButton:"btn btn-success w-100"}}),window.location.reload()),(e.errors||e.invalid)&&new d(e.errors||e.invalid)}).catch(e=>{console.log("Error:",e)}).finally(()=>{$(n).empty().append(`
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-send mx-0"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 14l11 -11" /><path d="M21 3l-6.5 18a.55 .55 0 0 1 -1 0l-3.5 -7l-7 -3.5a.55 .55 0 0 1 0 -1l18 -6.5" /></svg>
                `).prop("disabled",!1)})})});
