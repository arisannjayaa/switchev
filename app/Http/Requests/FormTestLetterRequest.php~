<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;
use LaravelEasyRepository\Traits\JsonValidateResponse;

class FormTestLetterRequest extends FormRequest
{
    use JsonValidateResponse;
    /**
     * Determine if the user is authorized to make this request.
     */
    public function authorize(): bool
    {
        return true;
    }

    /**
     * Get the validation rules that apply to the request.
     *
     * @return array<string, \Illuminate\Contracts\Validation\ValidationRule|array<mixed>|string>
     */
    public function rules(): array
    {
//        $rules =  [
//            'type' => ['required'],
//            'sop_component_installation' => ['required', 'file', 'mimes:pdf', 'max:2048'],
//            'technical_drawing' => ['required', 'file', 'mimes:pdf', 'max:2048'],
//            'conversion_workshop_certificate' => ['required', 'file', 'mimes:pdf', 'max:2048'],
//            'electrical_diagram' => ['required', 'file', 'mimes:pdf', 'max:2048'],
//            'photocopy_stnk' => ['required', 'file', 'mimes:pdf', 'max:2048'],
//            'physical_inspection' => ['required', 'file', 'mimes:pdf', 'max:2048'],
//            'test_report' => ['required', 'file', 'mimes:pdf', 'max:2048'],
//        ];

        $rules = [];

        if ($this->input('form_step') == 1) {
            $rules['workshop_type'] = ['required'];
            $rules['responsible_person'] = ['required'];
            $rules['telephone'] = ['required'];
            $rules['workshop'] = ['required'];
            $rules['address'] = ['required'];
        }

        if ($this->input('form_step') == 2) {
            $rules['brand'] = ['required'];
            $rules['type'] = ['required'];
            $rules['type_vehicle'] = ['required'];
            $rules['trademark'] = ['required'];
            $rules['country_of_origin'] = ['required'];
            $rules['variant'] = ['required'];
            $rules['allotment'] = ['required'];
            $rules['transmission'] = ['required'];
            $rules['drive_system'] = ['required'];
        }

        if ($this->input('form_step') == 3) {
            $rules['chassis'] = ['required'];
            $rules['chassis_place_number'] = ['required'];
            $rules['chassis_method_number'] = ['required'];
            $rules['pre_conversion_engine'] = ['required'];
            $rules['pre_conversion_engine_place_number'] = ['required'];
            $rules['pre_conversion_engine_method_number'] = ['required'];
            $rules['post_conversion_engine'] = ['required'];
            $rules['post_conversion_engine_place_number'] = ['required'];
            $rules['post_conversion_engine_method_number'] = ['required'];
        }

        if ($this->input('form_step') == 4) {
            $rules['brand_drive_motor'] = ['required'];
            $rules['type_drive_motor'] = ['required'];
            $rules['location_drive_motor'] = ['required'];
            $rules['voltage_drive_motor'] = ['required'];
            $rules['ampere_drive_motor'] = ['required'];
            $rules['power_drive_motor'] = ['required'];
            $rules['power_max_drive_motor'] = ['required'];
            $rules['rotation_drive_motor'] = ['required'];
        }

        if ($this->input('form_step') == 5) {
            $rules['conversion_voltage_fuel_system'] = ['required'];
            $rules['electrical_voltage_fuel_system'] = ['required'];
            $rules['battery_capacity_fuel_system'] = ['required'];
        }

        if ($this->input('form_step') == 6) {
            $rules['total_length_vehicle_dimension'] = ['required'];
            $rules['total_width_vehicle_dimension'] = ['required'];
            $rules['total_height_vehicle_dimension'] = ['required'];
            $rules['axis_distance_vehicle_dimension'] = ['required'];
            $rules['front_over_vehicle_dimension'] = ['required'];
            $rules['rear_over_vehicle_dimension'] = ['required'];
            $rules['ground_clearance_vehicle_dimension'] = ['required'];
        }

        if ($this->has('old_sop_component_installation') && $this->input('old_sop_component_installation')) {
            unset($rules['sop_component_installation']);
        }

        if ($this->has('old_technical_drawing') && $this->input('old_technical_drawing')) {
            unset($rules['technical_drawing']);
        }

        if ($this->has('old_conversion_workshop_certificate') && $this->input('old_conversion_workshop_certificate')) {
            unset($rules['conversion_workshop_certificate']);
        }

        if ($this->has('old_electrical_diagram') && $this->input('old_electrical_diagram')) {
            unset($rules['electrical_diagram']);
        }

        if ($this->has('old_photocopy_stnk') && $this->input('old_photocopy_stnk')) {
            unset($rules['photocopy_stnk']);
        }

        if ($this->has('old_physical_inspection') && $this->input('old_physical_inspection')) {
            unset($rules['physical_inspection']);
        }

        if ($this->has('old_test_report') && $this->input('old_test_report')) {
            unset($rules['test_report']);
        }

        return $rules;
    }

    public function messages()
    {
        return [
            'workshop_type.required' => 'Tipe wajib diisi.',
            'responsible_person.required' => 'Penanggung jawab wajib diisi.',
            'telephone.required' => 'Telepon wajib diisi.',
            'workshop.required' => 'Bengkel wajib diisi.',
            'address.required' => 'Alamat wajib diisi.',
            'brand.required' => 'Merek wajib diisi.',
            'type.required' => 'Tipe kendaraan wajib diisi.',
            'type_vehicle.required' => 'Jenis kendaraan wajib diisi.',
            'trademark.required' => 'Merek dagang wajib diisi.',
            'country_of_origin.required' => 'Negara asal wajib diisi.',
            'variant.required' => 'Varian wajib diisi.',
            'allotment.required' => 'Peruntukan wajib diisi.',
            'transmission.required' => 'Transmisi wajib diisi.',
            'drive_system.required' => 'Sistem penggerak wajib diisi.',
            'chassis.required' => 'Nomor rangka wajib diisi.',
            'chassis_place_number.required' => 'Tempat penomoran rangka wajib diisi.',
            'chassis_method_number.required' => 'Cara penomoran rangka wajib diisi.',
            'pre_conversion_engine.required' => 'Nomor mesin pra konversi wajib diisi.',
            'pre_conversion_engine_place_number.required' => 'Tempat penomoran mesin pra konversi wajib diisi.',
            'pre_conversion_engine_method_number.required' => 'Cara penomoran mesin pra konversi wajib diisi.',
            'post_conversion_engine.required' => 'Nomor mesin pasca konversi wajib diisi.',
            'post_conversion_engine_place_number.required' => 'Tempat penomoran mesin pasca konversi wajib diisi.',
            'post_conversion_engine_method_number.required' => 'Cara penomoran mesin pasca konversi wajib diisi.',
            'brand_drive_motor.required' => 'Merek wajib diisi.',
            'type_drive_motor.required' => 'Jenis wajib diisi.',
            'location_drive_motor.required' => 'Letak wajib diisi.',
            'voltage_drive_motor.required' => 'Tegangan kerja motor (Volt) wajib diisi.',
            'ampere_drive_motor.required' => 'Arus maksimum motor (Ampere) wajib diisi.',
            'power_drive_motor.required' => 'Daya motor (kW) wajib diisi.',
            'rotation_drive_motor.required' => 'Putaran maksimum motor (rpm) wajib diisi.',
            'power_max_drive_motor.required' => 'Daya motor maksimum (kW) wajib diisi.',
            'conversion_voltage_fuel_system.required' => 'Tegangan kerja sistem konversi wajib diisi.',
            'electrical_voltage_fuel_system.required' => 'Tegangan kerja kelistrikan kendaraan wajib diisi.',
            'battery_capacity_fuel_system.required' => 'Kapasitas Baterai wajib diisi.',
            'total_length_vehicle_dimension.required' => 'Panjang total wajib diisi.',
            'total_width_vehicle_dimension.required' => 'Lebar total wajib diisi.',
            'total_height_vehicle_dimension.required' => 'Tinggi total wajib diisi.',
            'axis_distance_vehicle_dimension.required' => 'Jarak sumbu I-II total wajib diisi.',
            'front_over_vehicle_dimension.required' => 'Julur depan I-II total wajib diisi.',
            'rear_over_vehicle_dimension.required' => 'Julur belakang I-II total wajib diisi.',
            'rear_over_vehicle_dimension.required' => 'Julur belakang I-II total wajib diisi.',
            'sop_component_installation.required' => 'Sop pemasangan komponen konversi wajib diisi.',
            'sop_component_installation.file' => 'Sop pemasangan komponen konversi harus berupa file.',
            'sop_component_installation.mimes' => 'Sop pemasangan komponen konversi wajib berformat pdf.',
            'sop_component_installation.max' => 'Sop pemasangan komponen konversi tidak boleh berukuran lebih dari 2mb.',
            'technical_drawing.required' => 'Gambar teknik wajib diisi.',
            'technical_drawing.file' => 'Gambar teknik harus berupa file.',
            'technical_drawing.mimes' => 'Gambar teknik wajib berformat pdf.',
            'technical_drawing.max' => 'Gambar teknik tidak boleh berukuran lebih dari 2mb.',
            'conversion_workshop_certificate.required' => 'Sertifikat bengkel konversi wajib diisi.',
            'conversion_workshop_certificate.file' => 'Sertifikat bengkel konversi harus berupa file.',
            'conversion_workshop_certificate.mimes' => 'Sertifikat bengkel konversi wajib berformat pdf.',
            'conversion_workshop_certificate.max' => 'Sertifikat bengkel konversi tidak boleh berukuran lebih dari 2mb.',
            'electrical_diagram.required' => 'Diagram kelistrikan wajib diisi.',
            'electrical_diagram.file' => 'Diagram kelistrikan harus berupa file.',
            'electrical_diagram.mimes' => 'Diagram kelistrikan wajib berformat pdf.',
            'electrical_diagram.max' => 'Diagram kelistrikan tidak boleh berukuran lebih dari 2mb.',
            'photocopy_stnk.required' => 'Fotokopi STNK wajib diisi.',
            'photocopy_stnk.file' => 'Fotokopi STNK harus berupa file.',
            'photocopy_stnk.mimes' => 'Fotokopi STNK wajib berformat pdf.',
            'photocopy_stnk.max' => 'Fotokopi STNK tidak boleh berukuran lebih dari 2mb.',
            'physical_inspection.required' => 'Cek fisik Kendaraan Bermotor  wajib diisi.',
            'physical_inspection.file' => 'Cek fisik Kendaraan Bermotor  harus berupa file.',
            'physical_inspection.mimes' => 'Cek fisik Kendaraan Bermotor  wajib berformat pdf.',
            'physical_inspection.max' => 'Cek fisik Kendaraan Bermotor  tidak boleh berukuran lebih dari 2mb.',
            'test_report.required' => 'Laporan pengujian wajib diisi.',
            'test_report.file' => 'Laporan pengujian harus berupa file.',
            'test_report.mimes' => 'Laporan pengujian wajib berformat pdf.',
            'test_report.max' => 'Laporan pengujian tidak boleh berukuran lebih dari 2mb.',
        ];
    }
}
